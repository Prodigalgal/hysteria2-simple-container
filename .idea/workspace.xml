<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AutoImportSettings">
    <option name="autoReloadType" value="SELECTIVE" />
  </component>
  <component name="ChangeListManager">
    <list default="true" id="362f4add-aecf-45be-bcc8-c693285895f1" name="æ›´æ”¹" comment="fix(entrypoint): ä¿®å¤å¸¦å®½é…ç½®é€»è¾‘ï¼Œç¡®ä¿AUTO_SPEEDTESTä¼˜å…ˆ&#10;&#10;é—®é¢˜æè¿°:&#10;åœ¨ä¹‹å‰çš„è„šæœ¬é€»è¾‘ä¸­ï¼Œå³ä½¿ `.env` æ–‡ä»¶ä¸­è®¾ç½®äº† `AUTO_SPEEDTEST=true`ï¼Œ&#10;å¦‚æžœ `UP_MBPS` å’Œ `DOWN_MBPS` å˜é‡å­˜åœ¨ä¸”éžç©ºï¼ˆå³ä½¿æ˜¯é»˜è®¤å€¼ &quot;100&quot;ï¼‰ï¼Œ&#10;è„šæœ¬ä¹Ÿä¼šé”™è¯¯åœ°è¿›å…¥â€œæ‰‹åŠ¨è®¾ç½®å¸¦å®½â€çš„åˆ†æ”¯ï¼Œå¯¼è‡´è‡ªåŠ¨æµ‹é€Ÿé€»è¾‘è¢«å®Œå…¨è·³è¿‡ã€‚&#10;è¿™ä¸Žæ–‡æ¡£å’Œé¢„æœŸçš„è¡Œä¸ºä¸ç¬¦â€”â€”å³æ‰‹åŠ¨è®¾ç½®çš„å¸¦å®½åªåº”åœ¨ `AUTO_SPEEDTEST=false` æ—¶ç”Ÿæ•ˆã€‚&#10;&#10;æ ¹æœ¬åŽŸå› :&#10;`entrypoint.sh` ä¸­çš„æ¡ä»¶åˆ¤æ–­é¡ºåºæœ‰è¯¯ã€‚å®ƒé¦–å…ˆæ£€æŸ¥äº† `UP_MBPS_USER` å’Œ `DOWN_MBPS_USER`&#10;æ˜¯å¦ä¸ºç©ºï¼Œè€Œä¸æ˜¯é¦–å…ˆæ£€æŸ¥ `AUTO_SPEEDTEST` çš„çŠ¶æ€ã€‚ç”±äºŽè¿™äº›å˜é‡æ€»æ˜¯ä»Ž&#10;`.env` æ–‡ä»¶ä¸­èŽ·å¾—éžç©ºå€¼ï¼Œå› æ­¤è‡ªåŠ¨æµ‹é€Ÿçš„ `elif` åˆ†æ”¯æ°¸è¿œæ— æ³•è¢«è§¦åŠã€‚&#10;&#10;è§£å†³æ–¹æ¡ˆ:&#10;é‡æž„äº† `entrypoint.sh` ä¸­å¸¦å®½é…ç½®éƒ¨åˆ†çš„ `if-elif-else` é€»è¾‘ã€‚&#10;çŽ°åœ¨çš„åˆ¤æ–­é¡ºåºå¦‚ä¸‹ï¼š&#10;1.  é¦–å…ˆæ£€æŸ¥ `AUTO_SPEEDTEST` æ˜¯å¦ä¸º `true`ã€‚å¦‚æžœæ˜¯ï¼Œåˆ™å¼ºåˆ¶æ‰§è¡Œè‡ªåŠ¨æµ‹é€Ÿã€‚&#10;2.  å¦‚æžœ `AUTO_SPEEDTEST` ä¸ä¸º `true`ï¼Œå†æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ‰‹åŠ¨è®¾ç½®äº†å¸¦å®½ã€‚&#10;3.  å¦‚æžœä»¥ä¸Šæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„åŽå¤‡å¸¦å®½å€¼ã€‚&#10;&#10;è¿™ä¸ªä¿®æ”¹ç¡®ä¿äº† `AUTO_SPEEDTEST` å˜é‡æ‹¥æœ‰æœ€é«˜çš„å†³ç­–ä¼˜å…ˆçº§ï¼Œä½¿è„šæœ¬çš„è¡Œä¸º&#10;ä¸Žç”¨æˆ·çš„æœŸæœ›å’Œæ–‡æ¡£æè¿°å®Œå…¨ä¸€è‡´ã€‚&#10;&#10;å˜æ›´è¯¦æƒ…:&#10;- `entrypoint.sh`: è°ƒæ•´äº†å¸¦å®½é…ç½®çš„æ¡ä»¶åˆ¤æ–­é¡ºåºã€‚">
      <change beforePath="$PROJECT_DIR$/.env" beforeDir="false" afterPath="$PROJECT_DIR$/.env" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/Dockerfile" beforeDir="false" afterPath="$PROJECT_DIR$/Dockerfile" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/docker-compose.yml" beforeDir="false" afterPath="$PROJECT_DIR$/docker-compose.yml" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/entrypoint.sh" beforeDir="false" afterPath="$PROJECT_DIR$/entrypoint.sh" afterDir="false" />
    </list>
    <option name="SHOW_DIALOG" value="false" />
    <option name="HIGHLIGHT_CONFLICTS" value="true" />
    <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
    <option name="LAST_RESOLUTION" value="IGNORE" />
  </component>
  <component name="ComposerSettings">
    <execution />
  </component>
  <component name="Git.Settings">
    <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
  </component>
  <component name="GitHubPullRequestSearchHistory">{
  &quot;lastFilter&quot;: {
    &quot;state&quot;: &quot;OPEN&quot;,
    &quot;assignee&quot;: &quot;Prodigalgal&quot;
  }
}</component>
  <component name="GithubPullRequestsUISettings">{
  &quot;selectedUrlAndAccountId&quot;: {
    &quot;url&quot;: &quot;https://github.com/Prodigalgal/hysteria2-simple-container.git&quot;,
    &quot;accountId&quot;: &quot;e3e02166-c2f7-4a95-ba0b-cde8f883b3df&quot;
  }
}</component>
  <component name="MacroExpansionManager">
    <option name="directoryName" value="QtUREjUI" />
  </component>
  <component name="ProjectCodeStyleSettingsMigration">
    <option name="version" value="2" />
  </component>
  <component name="ProjectColorInfo">{
  &quot;associatedIndex&quot;: 3
}</component>
  <component name="ProjectId" id="2zJ9AtvMa7CrupfOikorZSAw0ag" />
  <component name="ProjectLevelVcsManager">
    <ConfirmationsSetting value="2" id="Add" />
  </component>
  <component name="ProjectViewState">
    <option name="hideEmptyMiddlePackages" value="true" />
    <option name="showExcludedFiles" value="false" />
    <option name="showLibraryContents" value="true" />
  </component>
  <component name="PropertiesComponent"><![CDATA[{
  "keyToString": {
    "ASKED_SHARE_PROJECT_CONFIGURATION_FILES": "true",
    "ModuleVcsDetector.initialDetectionPerformed": "true",
    "RunOnceActivity.ShowReadmeOnStart": "true",
    "RunOnceActivity.git.unshallow": "true",
    "RunOnceActivity.go.formatter.settings.were.checked": "true",
    "RunOnceActivity.go.migrated.go.modules.settings": "true",
    "SHARE_PROJECT_CONFIGURATION_FILES": "true",
    "dart.analysis.tool.window.visible": "false",
    "git-widget-placeholder": "main",
    "go.import.settings.migrated": "true",
    "kotlin-language-version-configured": "true",
    "last_opened_file_path": "D:/WorkSpace/Project/dockerspace/hysteria2-simple-container",
    "node.js.detected.package.eslint": "true",
    "node.js.detected.package.tslint": "true",
    "node.js.selected.package.eslint": "(autodetect)",
    "node.js.selected.package.tslint": "(autodetect)",
    "nodejs_package_manager_path": "npm",
    "org.rust.cargo.project.model.impl.CargoExternalSystemProjectAware.subscribe.first.balloon": "",
    "org.rust.first.attach.projects": "true",
    "settings.editor.selected.configurable": "ssh.settings",
    "show.migrate.to.gradle.popup": "false",
    "vue.rearranger.settings.migration": "true"
  }
}]]></component>
  <component name="RustProjectSettings">
    <option name="toolchainHomeDirectory" value="$USER_HOME$/.cargo/bin" />
  </component>
  <component name="TaskManager">
    <task active="true" id="Default" summary="é»˜è®¤ä»»åŠ¡">
      <changelist id="362f4add-aecf-45be-bcc8-c693285895f1" name="æ›´æ”¹" comment="" />
      <created>1751438169657</created>
      <option name="number" value="Default" />
      <option name="presentableId" value="Default" />
      <updated>1751438169657</updated>
      <workItem from="1751438170951" duration="2780000" />
      <workItem from="1751677944842" duration="24000" />
      <workItem from="1751678024807" duration="17000" />
      <workItem from="1751678809594" duration="1446000" />
      <workItem from="1751878748300" duration="841000" />
      <workItem from="1751900095361" duration="5387000" />
      <workItem from="1751940411595" duration="7184000" />
      <workItem from="1757471640581" duration="1540000" />
      <workItem from="1757896673064" duration="809000" />
      <workItem from="1765759265838" duration="1543000" />
    </task>
    <task id="LOCAL-00001" summary="feat: å¢žåŠ å¤šæž¶æž„æ”¯æŒä¸Žè‡ªå®šä¹‰é…ç½®&#10;&#10;æœ¬æ¬¡æäº¤å¼•å…¥äº†å¤šé¡¹å¢žå¼ºåŠŸèƒ½ï¼Œä»¥æå‡é¡¹ç›®çš„é€šç”¨æ€§å’Œæ€§èƒ½ã€‚&#10;&#10;- **å¤šæž¶æž„æ”¯æŒ:** Dockerfile çŽ°é‡‡ç”¨å¤šé˜¶æ®µæž„å»ºï¼ŒåŒæ—¶æ”¯æŒ `amd64` å’Œ `arm64` æž¶æž„ï¼Œä½¿é¡¹ç›®èƒ½è¿è¡Œåœ¨æ ‘èŽ“æ´¾ã€ARM äº‘æœåŠ¡å™¨ç­‰æ›´å¤šè®¾å¤‡ä¸Šã€‚&#10;&#10;- **å¸¦å®½é…ç½®:** ç”¨æˆ·çŽ°åœ¨å¯ä»¥é€šè¿‡ `UP_MBPS` å’Œ `DOWN_MBPS` çŽ¯å¢ƒå˜é‡æ¥å®šåˆ¶ Hysteria çš„å¸¦å®½é™åˆ¶ã€‚&#10;&#10;- **è‡ªå®šä¹‰æ··æ·†:** æ··æ·†ç±»åž‹ (`OBFS_TYPE`) å’Œæ··æ·†å¯†ç  (`OBFS_PASSWORD`) çŽ°å·²æ”¯æŒé€šè¿‡çŽ¯å¢ƒå˜é‡è¿›è¡Œé…ç½®ï¼Œä¸ºé«˜çº§ç”¨æˆ·æä¾›äº†æ›´å¤§çš„çµæ´»æ€§ã€‚&#10;&#10;- **æž„å»ºä¼˜åŒ–:** å¤šé˜¶æ®µæž„å»ºé€šè¿‡ç¼“å­˜äºŒè¿›åˆ¶æ–‡ä»¶ä¸‹è½½å±‚ï¼Œæ˜¾è‘—åŠ å¿«äº†åŽç»­çš„é•œåƒæž„å»ºé€Ÿåº¦ã€‚">
      <option name="closed" value="true" />
      <created>1751438641237</created>
      <option name="number" value="00001" />
      <option name="presentableId" value="LOCAL-00001" />
      <option name="project" value="LOCAL" />
      <updated>1751438641237</updated>
    </task>
    <task id="LOCAL-00002" summary="feat: å®žçŽ°å…¨è‡ªåŠ¨æ™ºèƒ½é…ç½®å¹¶ä¿®å¤å¯åŠ¨å¥å£®æ€§é—®é¢˜&#10;&#10;æœ¬æ¬¡æäº¤æ˜¯ä¸€æ¬¡é‡å¤§æ›´æ–°ï¼Œå¼•å…¥äº†å…¨è‡ªåŠ¨çš„å¯†ç å’Œå¸¦å®½é…ç½®åŠŸèƒ½ï¼Œå¹¶å¯¹å¯åŠ¨è„šæœ¬è¿›è¡Œäº†å…¨é¢åŠ å›ºï¼Œä»¥è§£å†³ä¸€ç³»åˆ—åœ¨å®žé™…éƒ¨ç½²ä¸­å‘çŽ°çš„ç«žæ€æ¡ä»¶å’Œé€»è¾‘ç¼ºé™·ã€‚&#10;&#10;**æ–°å¢žæ ¸å¿ƒåŠŸèƒ½:**&#10;&#10;1.  **è‡ªåŠ¨å¯†ç ç”Ÿæˆ:**&#10;    - å¦‚æžœç”¨æˆ·æœªæä¾› `PASSWORD` çŽ¯å¢ƒå˜é‡ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª 16 ä½çš„å¼ºéšæœºå¯†ç ï¼Œå¹¶æ¸…æ™°åœ°æ‰“å°åœ¨å¯åŠ¨æ—¥å¿—ä¸­ï¼Œé¿å…äº†ç”¨æˆ·ä½¿ç”¨å¼±å¯†ç æˆ–å¿˜è®°è®¾ç½®å¯†ç çš„é—®é¢˜ã€‚&#10;&#10;2.  **è‡ªåŠ¨å¸¦å®½æµ‹é€Ÿ:**&#10;    - æ–°å¢ž `AUTO_SPEEDTEST` é€‰é¡¹ï¼ˆé»˜è®¤å¼€å¯ï¼‰ã€‚å¯åŠ¨æ—¶ï¼Œå®¹å™¨ä¼šè‡ªåŠ¨è¿è¡Œ `speedtest-cli` æ¥æ£€æµ‹æœåŠ¡å™¨çš„å®žé™…ä¸Šä¸‹è¡Œå¸¦å®½ï¼Œå¹¶ä»¥æ­¤ä¸ºä¾æ®æ™ºèƒ½é…ç½® Hysteria çš„æ€§èƒ½å‚æ•°ï¼Œä»Žè€Œæœ€å¤§åŒ–åˆ©ç”¨æœåŠ¡å™¨èµ„æºã€‚&#10;&#10;**å¥å£®æ€§ä¿®å¤ä¸Žä¼˜åŒ–:**&#10;&#10;1.  **ä¿®å¤é…ç½®ä¼˜å…ˆçº§é€»è¾‘:**&#10;    - **é—®é¢˜:** å³ä½¿ç”¨æˆ·æœªæ‰‹åŠ¨è®¾ç½®å¸¦å®½ï¼Œ`docker-compose.yml` çš„é»˜è®¤å€¼ä¹Ÿä¼šè¦†ç›–è‡ªåŠ¨æµ‹é€Ÿã€‚&#10;    - **è§£å†³:** å°†æ‰€æœ‰é»˜è®¤å€¼å¤„ç†é€»è¾‘ä»Ž `docker-compose.yml` ç§»è‡³ `entrypoint.sh`ï¼Œç¡®ä¿äº†æ­£ç¡®çš„ä¼˜å…ˆçº§é¡ºåºï¼š**ç”¨æˆ·æ‰‹åŠ¨è®¾ç½® &gt; è‡ªåŠ¨æµ‹é€Ÿ &gt; è„šæœ¬å†…é»˜è®¤å€¼**ã€‚&#10;&#10;2.  **è§£å†³å¯åŠ¨æ—¶ç½‘ç»œç«žæ€é—®é¢˜:**&#10;    - **é—®é¢˜:** è‡ªåŠ¨æµ‹é€Ÿåœ¨å®¹å™¨ç½‘ç»œå®Œå…¨å°±ç»ªå‰æ‰§è¡Œï¼Œå¯¼è‡´ç«‹å³å¤±è´¥ã€‚&#10;    - **è§£å†³:** åœ¨æµ‹é€Ÿå‰å¢žåŠ äº† 5 ç§’çš„ç­‰å¾…æ—¶é—´ (`sleep 5`)ï¼Œä»¥ç¡®ä¿ç½‘ç»œåˆå§‹åŒ–å®Œæˆï¼Œä»Žè€Œå¤§å¹…æå‡äº†æµ‹é€ŸæˆåŠŸçŽ‡ã€‚&#10;&#10;3.  **ä¿®å¤éšæœºå¯†ç é•¿åº¦ä¸è¶³é—®é¢˜:**&#10;    - **é—®é¢˜:** æ—§çš„å¯†ç ç”Ÿæˆæ–¹æ³•å¯èƒ½äº§ç”Ÿä¸æ»¡è¶³ Hysteria æœ€ä½Žé•¿åº¦è¦æ±‚çš„å¯†ç ï¼Œå¯¼è‡´æœåŠ¡å¯åŠ¨å¤±è´¥ã€‚&#10;    - **è§£å†³:** é‡‡ç”¨ `LC_ALL=C tr -dc 'A-Za-z0-9' &lt; /dev/urandom | head -c 16` çš„å¯é æ–¹æ³•ï¼Œç¡®ä¿å¯†ç é•¿åº¦å§‹ç»ˆä¸º 16 ä½ã€‚&#10;&#10;4.  **å…¨é¢æå‡è„šæœ¬å¥å£®æ€§:**&#10;    - **å®‰å…¨è®¾ç½®:** è„šæœ¬å¯ç”¨ `set -eu`ï¼Œé˜²æ­¢å› å˜é‡æœªå®šä¹‰æˆ–å‘½ä»¤å¤±è´¥è€Œäº§ç”Ÿæ„å¤–è¡Œä¸ºã€‚&#10;    - **æ—¥å¿—ä¼˜åŒ–:** è°ƒæ•´äº†æ—¥å¿—è¾“å‡ºé¡ºåºï¼Œä½¿å…¶æ›´åŠ çº¿æ€§ã€æ˜“äºŽç†è§£ï¼Œå¹¶ä¸ºæ‰€æœ‰å…³é”®æ­¥éª¤å’Œé”™è¯¯åœºæ™¯å¢žåŠ äº†æ¸…æ™°çš„æç¤ºä¿¡æ¯ã€‚&#10;    - **ä¾èµ–å®‰è£…:** åœ¨ `Dockerfile` ä¸­æ·»åŠ äº† `gawk` å’Œ `speedtest-cli` åŠå…¶ä¾èµ–ï¼Œä»¥æ”¯æŒæ–°çš„è„šæœ¬åŠŸèƒ½ã€‚">
      <option name="closed" value="true" />
      <created>1751440150654</created>
      <option name="number" value="00002" />
      <option name="presentableId" value="LOCAL-00002" />
      <option name="project" value="LOCAL" />
      <updated>1751440150654</updated>
    </task>
    <task id="LOCAL-00003" summary="updateï¼šREADME">
      <option name="closed" value="true" />
      <created>1751440355165</created>
      <option name="number" value="00003" />
      <option name="presentableId" value="LOCAL-00003" />
      <option name="project" value="LOCAL" />
      <updated>1751440355165</updated>
    </task>
    <task id="LOCAL-00004" summary="Fixï¼šTLS change to passthrough">
      <option name="closed" value="true" />
      <created>1751878780135</created>
      <option name="number" value="00004" />
      <option name="presentableId" value="LOCAL-00004" />
      <option name="project" value="LOCAL" />
      <updated>1751878780135</updated>
    </task>
    <task id="LOCAL-00005" summary="feat: å…¨æ–¹ä½é‡æž„éƒ¨ç½²æ–¹æ¡ˆï¼Œå¢žå¼ºæŠ—å°é”ä¸Žç”¨æˆ·ä½“éªŒ&#10;&#10;æœ¬æ¬¡æäº¤æ˜¯å¯¹ Hysteria 2 + Traefik éƒ¨ç½²æ–¹æ¡ˆçš„ä¸€æ¬¡é‡å¤§é‡æž„ï¼Œæ—¨åœ¨å…¨é¢æå‡é¡¹ç›®çš„å¥å£®æ€§ã€æŠ—å°é”èƒ½åŠ›ã€æ€§èƒ½å’Œç”¨æˆ·å‹å¥½åº¦ã€‚æ–¹æ¡ˆä»Žä¸€ä¸ªåŸºç¡€çš„éƒ¨ç½²æ¨¡åž‹å‡çº§ä¸ºä¸€ä¸ªæ™ºèƒ½ã€å…¨è‡ªåŠ¨ä¸”é«˜åº¦å¯å®šåˆ¶çš„â€œäº¤é’¥åŒ™â€è§£å†³æ–¹æ¡ˆã€‚&#10;&#10;ä¸Žåˆå§‹ç‰ˆæœ¬ç›¸æ¯”ï¼Œä¸»è¦æ”¹è¿›å¦‚ä¸‹ï¼š&#10;&#10;### âœ¨ æ–°å¢žåŠŸèƒ½ (Features)&#10;&#10;1.  **å¼•å…¥ç½‘ç«™ä¼ªè£… (Masquerade):**&#10;    -   Hysteria æœåŠ¡çŽ°åœ¨å†…ç½®äº†åå‘ä»£ç†ä¼ªè£…åŠŸèƒ½ã€‚å½“æœåŠ¡å™¨è¢«ç›´æŽ¥é€šè¿‡ HTTPS è®¿é—®æ—¶ï¼Œä¼šæ˜¾ç¤ºä¸ºä¸€ä¸ªçœŸå®žçš„ç½‘ç«™ï¼ˆé»˜è®¤ä¸º Bingï¼‰ï¼Œæžå¤§åœ°å¢žå¼ºäº†æŠ—ä¸»åŠ¨æŽ¢æµ‹å’Œå°é”çš„èƒ½åŠ›ã€‚&#10;    -   é€šè¿‡ `.env` æ–‡ä»¶ä¸­çš„ `MASQUERADE_URL` å˜é‡ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾è‡ªå®šä¹‰ä¼ªè£…ç›®æ ‡ã€‚&#10;&#10;2.  **é»˜è®¤ ACL è§„åˆ™:**&#10;    -   ä¸º Hysteria æœåŠ¡å™¨å¢žåŠ äº†é»˜è®¤çš„ `direct(all)` ACL è§„åˆ™ï¼Œä»Žæ ¹æœ¬ä¸Šè§£å†³äº†å®¢æˆ·ç«¯è¿žæŽ¥åŽå› ç¼ºå°‘å‡ºç«™æƒé™è€Œå‡ºçŽ° `operation not permitted` çš„é—®é¢˜ã€‚&#10;&#10;3.  **å¼•å…¥ `.env` é…ç½®æ–‡ä»¶:**&#10;    -   é‡‡ç”¨æ ‡å‡†çš„ `.env` æ–‡ä»¶æ¥ç®¡ç†æ‰€æœ‰ç”¨æˆ·é…ç½®ï¼Œå–ä»£äº†ä¹‹å‰åœ¨å‘½ä»¤è¡Œä¸­ä¼ é€’é•¿ä¸²çŽ¯å¢ƒå˜é‡çš„æ–¹å¼ï¼Œä½¿é…ç½®æ›´æ¸…æ™°ã€å®‰å…¨ä¸”æ˜“äºŽç®¡ç†ã€‚&#10;&#10;### ðŸš€ æ€§èƒ½ä¸Žä¼˜åŒ– (Performance &amp; Optimizations)&#10;&#10;1.  **è¯ä¹¦ç”³è¯·ä¼˜åŒ–:**&#10;    -   å°† Traefik çš„ ACME è´¨è¯¢æ–¹å¼ä»Ž `HTTP-01` å‡çº§ä¸º `TLS-ALPN-01`ã€‚è¿™ä½¿å¾—è¯ä¹¦ç”³è¯·å’Œç»­ç­¾éƒ½åœ¨ 443 ç«¯å£ä¸Šå®Œæˆï¼Œä¸å†éœ€è¦æš´éœ² 80 ç«¯å£ï¼Œå‡å°‘äº†æ”»å‡»é¢ã€‚&#10;&#10;2.  **æ”¯æŒ AVX æŒ‡ä»¤é›†:**&#10;    -   `Dockerfile` å’Œ `docker-compose.yml` çŽ°åœ¨æ”¯æŒé€šè¿‡ `HYSTERIA_ARCH_SUFFIX` å˜é‡é€‰æ‹©æ€§åœ°æž„å»ºå’Œä½¿ç”¨æ€§èƒ½æ›´å¼ºçš„ AVX ç‰ˆæœ¬ Hysteriaã€‚&#10;&#10;3.  **å†…æ ¸ç½‘ç»œå‚æ•°è°ƒä¼˜ (å·²ä½œä¸ºå¯é€‰):**&#10;    -   åœ¨ `docker-compose.yml` ä¸­å¢žåŠ äº† `sysctls` é…ç½®ä»¥ä¼˜åŒ–å†…æ ¸ç½‘ç»œç¼“å†²åŒºï¼ŒåŽå› å…¼å®¹æ€§é—®é¢˜æ³¨é‡ŠæŽ‰ï¼Œä½†ä¿ç•™äº†ä»£ç ä½œä¸ºç”¨æˆ·çš„å¯é€‰é…ç½®ã€‚&#10;&#10;### ðŸ”§ æ”¹è¿›ä¸Žä¿®å¤ (Improvements &amp; Fixes)&#10;&#10;1.  **å¥å£®çš„å¯åŠ¨è„šæœ¬ (`entrypoint.sh`):**&#10;    -   é‡æž„äº†å¯åŠ¨è„šæœ¬ï¼Œå¢žåŠ äº†æ›´æ™ºèƒ½çš„è¯ä¹¦ç­‰å¾…é€»è¾‘ã€‚çŽ°åœ¨å®ƒä¼šå®‰é™åœ°è½®è¯¢ç­‰å¾… Traefik ç”Ÿæˆè¯ä¹¦ï¼Œè€Œä¸æ˜¯åœ¨æ‰¾ä¸åˆ°è¯ä¹¦æ—¶åå¤å¿«é€Ÿé‡å¯ï¼Œæžå¤§åœ°æ”¹å–„äº†é¦–æ¬¡å¯åŠ¨çš„ä½“éªŒå’Œæ—¥å¿—æ¸…æ™°åº¦ã€‚&#10;    -   ä¼˜åŒ–äº†å¸¦å®½é…ç½®éƒ¨åˆ†çš„æ—¥å¿—è¾“å‡ºï¼Œä½¿å…¶æ›´å‡†ç¡®åœ°åæ˜ é…ç½®æ¥æºï¼ˆæ‰‹åŠ¨ã€è‡ªåŠ¨æµ‹é€Ÿæˆ–é»˜è®¤å€¼ï¼‰ã€‚&#10;&#10;2.  **å¼ºåŒ–çš„ Docker æž„å»º (`Dockerfile`):**&#10;    -   é‡æž„äº† `Dockerfile`ï¼Œé‡‡ç”¨å¤šé˜¶æ®µæž„å»ºï¼Œåˆ†ç¦»äº†ä¸‹è½½å’Œæž„å»ºè¿‡ç¨‹ã€‚&#10;    -   å¢žåŠ äº† `wget` ä¸‹è½½é‡è¯•é€»è¾‘ï¼Œè§£å†³äº†åœ¨ä¸ç¨³å®šç½‘ç»œçŽ¯å¢ƒä¸‹æž„å»ºå¤±è´¥çš„é—®é¢˜ã€‚&#10;    -   é€šè¿‡ä½¿ç”¨ `apk` å®‰è£… `speedtest-cli` æˆ–ä¸º `pip` æ·»åŠ  `--break-system-packages` å‚æ•°ï¼Œè§£å†³äº† `PEP 668` å¯¼è‡´çš„æž„å»ºé”™è¯¯ã€‚&#10;&#10;3.  **å…¨é¢çš„æ–‡æ¡£æ›´æ–° (`README.md`):**&#10;    -   é‡å†™äº† README æ–‡ä»¶ï¼Œè¯¦ç»†ä»‹ç»äº†æ‰€æœ‰æ–°åŠŸèƒ½ã€`.env` é…ç½®é¡¹ã€æ›´æ–°æ­¥éª¤å’Œæ›´å…¨é¢çš„æ•…éšœæŽ’é™¤æŒ‡å—ï¼Œæ˜¾è‘—é™ä½Žäº†ç”¨æˆ·çš„ä½¿ç”¨é—¨æ§›ã€‚">
      <option name="closed" value="true" />
      <created>1751906500920</created>
      <option name="number" value="00005" />
      <option name="presentableId" value="LOCAL-00005" />
      <option name="project" value="LOCAL" />
      <updated>1751906500920</updated>
    </task>
    <task id="LOCAL-00006" summary="fix(traefik): å¯ç”¨TLSé€ä¼ ä»¥ä¿®å¤TCPä¼ªè£…åŠŸèƒ½&#10;&#10;é—®é¢˜æè¿°:&#10;åœ¨ä¹‹å‰çš„é…ç½®ä¸­ï¼Œç›´æŽ¥é€šè¿‡æµè§ˆå™¨è®¿é—®åŸŸåæ—¶ï¼Œä¼ªè£…ç«™ç‚¹æ— æ³•æ˜¾ç¤ºã€‚&#10;Traefik æ—¥å¿—æ˜¾ç¤º &quot;connection refused&quot;ï¼ŒåŽç»­ä¿®å¤äº† Hysteria ç›‘å¬ TCP ä¼ªè£…ç«¯å£åŽï¼Œ&#10;Hysteria æ—¥å¿—åˆæ˜¾ç¤º &quot;TLS handshake error: first record does not look like a TLS handshake&quot;ã€‚&#10;&#10;æ ¹æœ¬åŽŸå› :&#10;Traefik çš„ TCP è·¯ç”±é…ç½®ä¸­ `tls.passthrough` è¢«è®¾ç½®ä¸º `false`ã€‚&#10;è¿™å¯¼è‡´ Traefik ç»ˆæ­¢äº†å®¢æˆ·ç«¯çš„ TLS è¿žæŽ¥ï¼Œç„¶åŽç”¨ä¸€ä¸ªæ™®é€šçš„ã€æœªåŠ å¯†çš„ TCP è¿žæŽ¥åŽ»è®¿é—®åŽç«¯çš„ Hysteria ä¼ªè£…æœåŠ¡å™¨ã€‚&#10;è€Œ Hysteria çš„ `listenHTTPS` æœŸæœ›æŽ¥æ”¶ä¸€ä¸ªå®Œæ•´çš„ã€åŠ å¯†çš„ TLS æ¡æ‰‹è¯·æ±‚ï¼Œå› æ­¤æ— æ³•è¯†åˆ« Traefik å‘æ¥çš„æ™®é€š TCP æµé‡ï¼Œå¯¼è‡´æ¡æ‰‹å¤±è´¥ã€‚&#10;&#10;è§£å†³æ–¹æ¡ˆ:&#10;å°† Traefik TCP è·¯ç”±çš„ `tls.passthrough` è®¾ç½®ä¸º `true`ã€‚&#10;è¿™æ · Traefik å°†ä»…æ ¹æ® SNI è·¯ç”±æµé‡ï¼Œè€ŒæŠŠå®Œæ•´çš„åŠ å¯† TLS è¿žæŽ¥ç›´æŽ¥é€ä¼ ç»™åŽç«¯çš„ Hysteria æœåŠ¡å™¨å¤„ç†ã€‚&#10;ç”±äºŽ Hysteria å·²ç»ä»Žå…±äº«çš„ `acme.json` ä¸­èŽ·å–äº†è¯ä¹¦å¹¶è‡ªè¡Œå¤„ç† TLSï¼Œè¿™æ˜¯æ­£ç¡®çš„å¤„ç†æ–¹å¼ã€‚&#10;&#10;åŒæ—¶ï¼Œç”±äºŽå¼€å¯äº† `passthrough`ï¼ŒTraefik ä¸å†éœ€è¦ `certresolver`ï¼Œå› æ­¤ç›¸å…³æ ‡ç­¾ä¹Ÿè¢«ç§»é™¤ä»¥ä¿æŒé…ç½®æ•´æ´ã€‚&#10;&#10;å˜æ›´è¯¦æƒ…:&#10;- åœ¨ `docker-compose.yml` ä¸­ï¼Œå°† `hysteria-server` æœåŠ¡çš„ Traefik label `traefik.tcp.routers.hysteria-tcp.tls.passthrough` çš„å€¼ä¿®æ”¹ä¸º `true`ã€‚&#10;- ç§»é™¤äº†ä¸å†éœ€è¦çš„ `traefik.tcp.routers.hysteria-tcp.tls.certresolver` æ ‡ç­¾ã€‚">
      <option name="closed" value="true" />
      <created>1751941662467</created>
      <option name="number" value="00006" />
      <option name="presentableId" value="LOCAL-00006" />
      <option name="project" value="LOCAL" />
      <updated>1751941662467</updated>
    </task>
    <task id="LOCAL-00007" summary="feat: å…¨åŠŸèƒ½é‡æž„Hysteriaéƒ¨ç½²æ–¹æ¡ˆå¹¶å¢žå¼ºç¨³å®šæ€§&#10;&#10;æœ¬æ¬¡æäº¤å¯¹Hysteriaçš„Dockeréƒ¨ç½²æ–¹æ¡ˆè¿›è¡Œäº†ä¸€æ¬¡å…¨é¢çš„é‡æž„å’ŒåŠ å›ºï¼Œè§£å†³äº†åˆå§‹ç‰ˆæœ¬ä¸­çš„å¤šä¸ªæ ¸å¿ƒé—®é¢˜ï¼ŒåŒ…æ‹¬TCPä¼ªè£…å¤±æ•ˆã€å®¹å™¨å¥åº·çŠ¶æ€æœªçŸ¥ä»¥åŠæ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆã€‚&#10;&#10;æœ€ç»ˆå®žçŽ°äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€ç¨³å®šå¯é ä¸”æ˜“äºŽç›‘æŽ§çš„å…¨è‡ªåŠ¨éƒ¨ç½²æ–¹æ¡ˆã€‚&#10;&#10;### 1. ä¿®å¤TCPä¼ªè£…åŠŸèƒ½ (æ ¸å¿ƒå˜æ›´)&#10;&#10;- **åˆå§‹é—®é¢˜**: ç›´æŽ¥é€šè¿‡æµè§ˆå™¨è®¿é—®åŸŸåæ— æ³•æ˜¾ç¤ºä¼ªè£…ç«™ç‚¹ã€‚&#10;- **è°ƒè¯•è¿‡ç¨‹**:&#10;    1.  æœ€åˆå‘çŽ°Traefikæ—¥å¿—æŠ¥`connection refused`ï¼ŒåŽŸå› æ˜¯Hysteriaæ²¡æœ‰ç›‘å¬TCPä¼ªè£…æµé‡ã€‚é€šè¿‡åœ¨`entrypoint.sh`ä¸­ä¸ºHysteriaçš„`masquerade`æ·»åŠ `listenHTTPS`è§£å†³äº†æ­¤é—®é¢˜ã€‚&#10;    2.  éšåŽå‘çŽ°Traefikæ—¥å¿—å˜ä¸º`TLS handshake error: first record does not look like a TLS handshake`ã€‚æ ¹æœ¬åŽŸå› æ˜¯`docker-compose.yml`ä¸­ä¸ºTCPè·¯ç”±é”™è¯¯åœ°é…ç½®äº†`tls.passthrough=true`ï¼Œå¯¼è‡´Traefikå°†åŠ å¯†æµé‡ç›´æŽ¥é€ä¼ ç»™äº†æœŸæœ›æŽ¥æ”¶æ™®é€šHTTPçš„Hysteriaã€‚&#10;- **æœ€ç»ˆæ–¹æ¡ˆ**:&#10;    -   åœ¨`docker-compose.yml`ä¸­ï¼Œå°†TCPè·¯ç”±çš„`tls.passthrough`æ”¹ä¸º`false`ï¼Œå¹¶ä¸ºå…¶é…ç½®`certresolver=le`ï¼Œ**è®©Traefikè´Ÿè´£TLSå¸è½½**ã€‚&#10;    -   åœ¨`entrypoint.sh`ä¸­ï¼Œè®©Hysteriaçš„ä¼ªè£…æœåŠ¡åœ¨`:8088`ç«¯å£ä¸Šç›‘å¬æ™®é€šçš„HTTPæµé‡ï¼Œä¸“é—¨ç”¨äºŽæŽ¥æ”¶Traefikè§£å¯†åŽè½¬å‘è¿‡æ¥çš„è¯·æ±‚ã€‚&#10;- **æˆæžœ**: å®žçŽ°äº†æ­£ç¡®çš„TLSå¸è½½æž¶æž„ï¼Œå……åˆ†åˆ©ç”¨äº†Traefikçš„ä¸ƒå±‚ä»£ç†èƒ½åŠ›ï¼Œå¹¶å…è®¸åœ¨è·¯ç”±ä¸Šåº”ç”¨HTTPä¸­é—´ä»¶ã€‚&#10;&#10;### 2. å¢žå¼ºæœåŠ¡ç¨³å®šæ€§ä¸Žå¥åº·ç›‘æŽ§&#10;&#10;- **åˆå§‹é—®é¢˜**: `docker-compose.yml`ä¸­æœªå®šä¹‰å¥åº·æ£€æŸ¥ï¼Œæ— æ³•åˆ¤æ–­Traefikå’ŒHysteriaå®¹å™¨çš„çœŸå®žè¿è¡ŒçŠ¶æ€ã€‚`traefik`å®¹å™¨æ›¾ä¸€åº¦å¤„äºŽ`unhealthy`çŠ¶æ€ã€‚&#10;- **è°ƒè¯•è¿‡ç¨‹**:&#10;    -   `traefik`ä¸å¥åº·çš„åŽŸå› æ˜¯å…¶`healthcheck`å‘½ä»¤æ— æ³•è®¿é—®é»˜è®¤çš„`:8080/ping`ç®¡ç†ç«¯ç‚¹ã€‚&#10;- **æœ€ç»ˆæ–¹æ¡ˆ**:&#10;    -   åœ¨`docker-compose.yml`çš„Traefikå¯åŠ¨å‘½ä»¤ä¸­ï¼Œæ˜Žç¡®å¯ç”¨`--ping`å’Œ`--api.insecure`ï¼Œå¹¶å®šä¹‰`traefik`ç®¡ç†å…¥å£ç‚¹ï¼ˆ`:8080`ï¼‰ã€‚&#10;    -   æ›´æ–°`traefik`çš„`healthcheck`æŒ‡ä»¤ï¼Œæ˜Žç¡®æŒ‡å‘`traefik`å…¥å£ç‚¹ï¼Œç¡®ä¿æ£€æŸ¥çš„å‡†ç¡®æ€§ã€‚&#10;    -   ä¸º`hysteria-server`æ·»åŠ äº†åŸºäºŽ`netstat`çš„UDPç«¯å£ç›‘å¬æ£€æŸ¥ï¼ŒéªŒè¯å…¶æ ¸å¿ƒæœåŠ¡æ˜¯å¦æ­£å¸¸ã€‚&#10;- **æˆæžœ**: DockerçŽ°åœ¨å¯ä»¥å‡†ç¡®ç›‘æŽ§ä¸¤ä¸ªæ ¸å¿ƒæœåŠ¡çš„å¥åº·çŠ¶å†µï¼Œå¹¶èƒ½åœ¨æœåŠ¡å¤±è´¥æ—¶è‡ªåŠ¨é‡å¯ã€‚&#10;&#10;### 3. ä¼˜åŒ–ä¸Žå…¼å®¹æ€§ä¿®å¤&#10;&#10;- **åˆå§‹é—®é¢˜**:&#10;    -   `sysctls`å†…æ ¸å‚æ•°ä¼˜åŒ–å¯èƒ½å¯¼è‡´åœ¨æŸäº›çŽ¯å¢ƒï¼ˆå¦‚GCPçš„COSï¼‰ä¸‹å®¹å™¨æ— æ³•å¯åŠ¨ã€‚&#10;    -   ï¼ˆå·²å›žé€€ï¼‰å°è¯•ä½¿ç”¨å¤§èŒƒå›´UDPç«¯å£æ˜ å°„ï¼ˆ`40000-50000`ï¼‰è¿›è¡Œç«¯å£è·³è·ƒï¼Œå¯¼è‡´`traefik`å®¹å™¨å¡åœ¨`created`çŠ¶æ€ã€‚&#10;- **æœ€ç»ˆæ–¹æ¡ˆ**:&#10;    -   å°†`sysctls`éƒ¨åˆ†ä¿ç•™ä½†é»˜è®¤æ³¨é‡ŠæŽ‰ï¼Œå¹¶æ·»åŠ äº†è¯´æ˜Žï¼Œå¢žå¼ºäº†æ–¹æ¡ˆçš„æ™®é€‚æ€§ã€‚&#10;    -   æš‚æ—¶ç§»é™¤äº†å¤æ‚çš„ç«¯å£è·³è·ƒæ–¹æ¡ˆï¼Œå›žå½’åˆ°å•ä¸€UDPç«¯å£ï¼ˆ`:443`ï¼‰ï¼Œç¡®ä¿åœ¨æ‰€æœ‰çŽ¯å¢ƒä¸‹çš„ç¨³å®šå¯åŠ¨ã€‚æœªæ¥çš„ä¼˜åŒ–å¯ä»¥éµå¾ªHysteriaå®˜æ–¹æ–‡æ¡£ï¼Œä½¿ç”¨å®¿ä¸»æœº`iptables`å®žçŽ°ã€‚&#10;&#10;ç»è¿‡ä»¥ä¸Šç³»åˆ—é‡æž„ï¼Œå½“å‰éƒ¨ç½²æ–¹æ¡ˆåœ¨åŠŸèƒ½ã€ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ä¸Šéƒ½è¾¾åˆ°äº†ä¸€ä¸ªå…¨æ–°çš„é«˜åº¦ã€‚">
      <option name="closed" value="true" />
      <created>1751945133627</created>
      <option name="number" value="00007" />
      <option name="presentableId" value="LOCAL-00007" />
      <option name="project" value="LOCAL" />
      <updated>1751945133627</updated>
    </task>
    <task id="LOCAL-00008" summary="fix(entrypoint): ä¿®å¤å¸¦å®½é…ç½®é€»è¾‘ï¼Œç¡®ä¿AUTO_SPEEDTESTä¼˜å…ˆ&#10;&#10;é—®é¢˜æè¿°:&#10;åœ¨ä¹‹å‰çš„è„šæœ¬é€»è¾‘ä¸­ï¼Œå³ä½¿ `.env` æ–‡ä»¶ä¸­è®¾ç½®äº† `AUTO_SPEEDTEST=true`ï¼Œ&#10;å¦‚æžœ `UP_MBPS` å’Œ `DOWN_MBPS` å˜é‡å­˜åœ¨ä¸”éžç©ºï¼ˆå³ä½¿æ˜¯é»˜è®¤å€¼ &quot;100&quot;ï¼‰ï¼Œ&#10;è„šæœ¬ä¹Ÿä¼šé”™è¯¯åœ°è¿›å…¥â€œæ‰‹åŠ¨è®¾ç½®å¸¦å®½â€çš„åˆ†æ”¯ï¼Œå¯¼è‡´è‡ªåŠ¨æµ‹é€Ÿé€»è¾‘è¢«å®Œå…¨è·³è¿‡ã€‚&#10;è¿™ä¸Žæ–‡æ¡£å’Œé¢„æœŸçš„è¡Œä¸ºä¸ç¬¦â€”â€”å³æ‰‹åŠ¨è®¾ç½®çš„å¸¦å®½åªåº”åœ¨ `AUTO_SPEEDTEST=false` æ—¶ç”Ÿæ•ˆã€‚&#10;&#10;æ ¹æœ¬åŽŸå› :&#10;`entrypoint.sh` ä¸­çš„æ¡ä»¶åˆ¤æ–­é¡ºåºæœ‰è¯¯ã€‚å®ƒé¦–å…ˆæ£€æŸ¥äº† `UP_MBPS_USER` å’Œ `DOWN_MBPS_USER`&#10;æ˜¯å¦ä¸ºç©ºï¼Œè€Œä¸æ˜¯é¦–å…ˆæ£€æŸ¥ `AUTO_SPEEDTEST` çš„çŠ¶æ€ã€‚ç”±äºŽè¿™äº›å˜é‡æ€»æ˜¯ä»Ž&#10;`.env` æ–‡ä»¶ä¸­èŽ·å¾—éžç©ºå€¼ï¼Œå› æ­¤è‡ªåŠ¨æµ‹é€Ÿçš„ `elif` åˆ†æ”¯æ°¸è¿œæ— æ³•è¢«è§¦åŠã€‚&#10;&#10;è§£å†³æ–¹æ¡ˆ:&#10;é‡æž„äº† `entrypoint.sh` ä¸­å¸¦å®½é…ç½®éƒ¨åˆ†çš„ `if-elif-else` é€»è¾‘ã€‚&#10;çŽ°åœ¨çš„åˆ¤æ–­é¡ºåºå¦‚ä¸‹ï¼š&#10;1.  é¦–å…ˆæ£€æŸ¥ `AUTO_SPEEDTEST` æ˜¯å¦ä¸º `true`ã€‚å¦‚æžœæ˜¯ï¼Œåˆ™å¼ºåˆ¶æ‰§è¡Œè‡ªåŠ¨æµ‹é€Ÿã€‚&#10;2.  å¦‚æžœ `AUTO_SPEEDTEST` ä¸ä¸º `true`ï¼Œå†æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ‰‹åŠ¨è®¾ç½®äº†å¸¦å®½ã€‚&#10;3.  å¦‚æžœä»¥ä¸Šæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„åŽå¤‡å¸¦å®½å€¼ã€‚&#10;&#10;è¿™ä¸ªä¿®æ”¹ç¡®ä¿äº† `AUTO_SPEEDTEST` å˜é‡æ‹¥æœ‰æœ€é«˜çš„å†³ç­–ä¼˜å…ˆçº§ï¼Œä½¿è„šæœ¬çš„è¡Œä¸º&#10;ä¸Žç”¨æˆ·çš„æœŸæœ›å’Œæ–‡æ¡£æè¿°å®Œå…¨ä¸€è‡´ã€‚&#10;&#10;å˜æ›´è¯¦æƒ…:&#10;- `entrypoint.sh`: è°ƒæ•´äº†å¸¦å®½é…ç½®çš„æ¡ä»¶åˆ¤æ–­é¡ºåºã€‚">
      <option name="closed" value="true" />
      <created>1751945482349</created>
      <option name="number" value="00008" />
      <option name="presentableId" value="LOCAL-00008" />
      <option name="project" value="LOCAL" />
      <updated>1751945482349</updated>
    </task>
    <option name="localTasksCounter" value="9" />
    <servers />
  </component>
  <component name="TypeScriptGeneratedFilesManager">
    <option name="version" value="3" />
  </component>
  <component name="Vcs.Log.Tabs.Properties">
    <option name="TAB_STATES">
      <map>
        <entry key="MAIN">
          <value>
            <State />
          </value>
        </entry>
      </map>
    </option>
  </component>
  <component name="VcsManagerConfiguration">
    <MESSAGE value="feat: å¢žåŠ å¤šæž¶æž„æ”¯æŒä¸Žè‡ªå®šä¹‰é…ç½®&#10;&#10;æœ¬æ¬¡æäº¤å¼•å…¥äº†å¤šé¡¹å¢žå¼ºåŠŸèƒ½ï¼Œä»¥æå‡é¡¹ç›®çš„é€šç”¨æ€§å’Œæ€§èƒ½ã€‚&#10;&#10;- **å¤šæž¶æž„æ”¯æŒ:** Dockerfile çŽ°é‡‡ç”¨å¤šé˜¶æ®µæž„å»ºï¼ŒåŒæ—¶æ”¯æŒ `amd64` å’Œ `arm64` æž¶æž„ï¼Œä½¿é¡¹ç›®èƒ½è¿è¡Œåœ¨æ ‘èŽ“æ´¾ã€ARM äº‘æœåŠ¡å™¨ç­‰æ›´å¤šè®¾å¤‡ä¸Šã€‚&#10;&#10;- **å¸¦å®½é…ç½®:** ç”¨æˆ·çŽ°åœ¨å¯ä»¥é€šè¿‡ `UP_MBPS` å’Œ `DOWN_MBPS` çŽ¯å¢ƒå˜é‡æ¥å®šåˆ¶ Hysteria çš„å¸¦å®½é™åˆ¶ã€‚&#10;&#10;- **è‡ªå®šä¹‰æ··æ·†:** æ··æ·†ç±»åž‹ (`OBFS_TYPE`) å’Œæ··æ·†å¯†ç  (`OBFS_PASSWORD`) çŽ°å·²æ”¯æŒé€šè¿‡çŽ¯å¢ƒå˜é‡è¿›è¡Œé…ç½®ï¼Œä¸ºé«˜çº§ç”¨æˆ·æä¾›äº†æ›´å¤§çš„çµæ´»æ€§ã€‚&#10;&#10;- **æž„å»ºä¼˜åŒ–:** å¤šé˜¶æ®µæž„å»ºé€šè¿‡ç¼“å­˜äºŒè¿›åˆ¶æ–‡ä»¶ä¸‹è½½å±‚ï¼Œæ˜¾è‘—åŠ å¿«äº†åŽç»­çš„é•œåƒæž„å»ºé€Ÿåº¦ã€‚" />
    <MESSAGE value="feat: å®žçŽ°å…¨è‡ªåŠ¨æ™ºèƒ½é…ç½®å¹¶ä¿®å¤å¯åŠ¨å¥å£®æ€§é—®é¢˜&#10;&#10;æœ¬æ¬¡æäº¤æ˜¯ä¸€æ¬¡é‡å¤§æ›´æ–°ï¼Œå¼•å…¥äº†å…¨è‡ªåŠ¨çš„å¯†ç å’Œå¸¦å®½é…ç½®åŠŸèƒ½ï¼Œå¹¶å¯¹å¯åŠ¨è„šæœ¬è¿›è¡Œäº†å…¨é¢åŠ å›ºï¼Œä»¥è§£å†³ä¸€ç³»åˆ—åœ¨å®žé™…éƒ¨ç½²ä¸­å‘çŽ°çš„ç«žæ€æ¡ä»¶å’Œé€»è¾‘ç¼ºé™·ã€‚&#10;&#10;**æ–°å¢žæ ¸å¿ƒåŠŸèƒ½:**&#10;&#10;1.  **è‡ªåŠ¨å¯†ç ç”Ÿæˆ:**&#10;    - å¦‚æžœç”¨æˆ·æœªæä¾› `PASSWORD` çŽ¯å¢ƒå˜é‡ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª 16 ä½çš„å¼ºéšæœºå¯†ç ï¼Œå¹¶æ¸…æ™°åœ°æ‰“å°åœ¨å¯åŠ¨æ—¥å¿—ä¸­ï¼Œé¿å…äº†ç”¨æˆ·ä½¿ç”¨å¼±å¯†ç æˆ–å¿˜è®°è®¾ç½®å¯†ç çš„é—®é¢˜ã€‚&#10;&#10;2.  **è‡ªåŠ¨å¸¦å®½æµ‹é€Ÿ:**&#10;    - æ–°å¢ž `AUTO_SPEEDTEST` é€‰é¡¹ï¼ˆé»˜è®¤å¼€å¯ï¼‰ã€‚å¯åŠ¨æ—¶ï¼Œå®¹å™¨ä¼šè‡ªåŠ¨è¿è¡Œ `speedtest-cli` æ¥æ£€æµ‹æœåŠ¡å™¨çš„å®žé™…ä¸Šä¸‹è¡Œå¸¦å®½ï¼Œå¹¶ä»¥æ­¤ä¸ºä¾æ®æ™ºèƒ½é…ç½® Hysteria çš„æ€§èƒ½å‚æ•°ï¼Œä»Žè€Œæœ€å¤§åŒ–åˆ©ç”¨æœåŠ¡å™¨èµ„æºã€‚&#10;&#10;**å¥å£®æ€§ä¿®å¤ä¸Žä¼˜åŒ–:**&#10;&#10;1.  **ä¿®å¤é…ç½®ä¼˜å…ˆçº§é€»è¾‘:**&#10;    - **é—®é¢˜:** å³ä½¿ç”¨æˆ·æœªæ‰‹åŠ¨è®¾ç½®å¸¦å®½ï¼Œ`docker-compose.yml` çš„é»˜è®¤å€¼ä¹Ÿä¼šè¦†ç›–è‡ªåŠ¨æµ‹é€Ÿã€‚&#10;    - **è§£å†³:** å°†æ‰€æœ‰é»˜è®¤å€¼å¤„ç†é€»è¾‘ä»Ž `docker-compose.yml` ç§»è‡³ `entrypoint.sh`ï¼Œç¡®ä¿äº†æ­£ç¡®çš„ä¼˜å…ˆçº§é¡ºåºï¼š**ç”¨æˆ·æ‰‹åŠ¨è®¾ç½® &gt; è‡ªåŠ¨æµ‹é€Ÿ &gt; è„šæœ¬å†…é»˜è®¤å€¼**ã€‚&#10;&#10;2.  **è§£å†³å¯åŠ¨æ—¶ç½‘ç»œç«žæ€é—®é¢˜:**&#10;    - **é—®é¢˜:** è‡ªåŠ¨æµ‹é€Ÿåœ¨å®¹å™¨ç½‘ç»œå®Œå…¨å°±ç»ªå‰æ‰§è¡Œï¼Œå¯¼è‡´ç«‹å³å¤±è´¥ã€‚&#10;    - **è§£å†³:** åœ¨æµ‹é€Ÿå‰å¢žåŠ äº† 5 ç§’çš„ç­‰å¾…æ—¶é—´ (`sleep 5`)ï¼Œä»¥ç¡®ä¿ç½‘ç»œåˆå§‹åŒ–å®Œæˆï¼Œä»Žè€Œå¤§å¹…æå‡äº†æµ‹é€ŸæˆåŠŸçŽ‡ã€‚&#10;&#10;3.  **ä¿®å¤éšæœºå¯†ç é•¿åº¦ä¸è¶³é—®é¢˜:**&#10;    - **é—®é¢˜:** æ—§çš„å¯†ç ç”Ÿæˆæ–¹æ³•å¯èƒ½äº§ç”Ÿä¸æ»¡è¶³ Hysteria æœ€ä½Žé•¿åº¦è¦æ±‚çš„å¯†ç ï¼Œå¯¼è‡´æœåŠ¡å¯åŠ¨å¤±è´¥ã€‚&#10;    - **è§£å†³:** é‡‡ç”¨ `LC_ALL=C tr -dc 'A-Za-z0-9' &lt; /dev/urandom | head -c 16` çš„å¯é æ–¹æ³•ï¼Œç¡®ä¿å¯†ç é•¿åº¦å§‹ç»ˆä¸º 16 ä½ã€‚&#10;&#10;4.  **å…¨é¢æå‡è„šæœ¬å¥å£®æ€§:**&#10;    - **å®‰å…¨è®¾ç½®:** è„šæœ¬å¯ç”¨ `set -eu`ï¼Œé˜²æ­¢å› å˜é‡æœªå®šä¹‰æˆ–å‘½ä»¤å¤±è´¥è€Œäº§ç”Ÿæ„å¤–è¡Œä¸ºã€‚&#10;    - **æ—¥å¿—ä¼˜åŒ–:** è°ƒæ•´äº†æ—¥å¿—è¾“å‡ºé¡ºåºï¼Œä½¿å…¶æ›´åŠ çº¿æ€§ã€æ˜“äºŽç†è§£ï¼Œå¹¶ä¸ºæ‰€æœ‰å…³é”®æ­¥éª¤å’Œé”™è¯¯åœºæ™¯å¢žåŠ äº†æ¸…æ™°çš„æç¤ºä¿¡æ¯ã€‚&#10;    - **ä¾èµ–å®‰è£…:** åœ¨ `Dockerfile` ä¸­æ·»åŠ äº† `gawk` å’Œ `speedtest-cli` åŠå…¶ä¾èµ–ï¼Œä»¥æ”¯æŒæ–°çš„è„šæœ¬åŠŸèƒ½ã€‚" />
    <MESSAGE value="updateï¼šREADME" />
    <MESSAGE value="Fixï¼šTLS change to passthrough" />
    <MESSAGE value="feat: å…¨æ–¹ä½é‡æž„éƒ¨ç½²æ–¹æ¡ˆï¼Œå¢žå¼ºæŠ—å°é”ä¸Žç”¨æˆ·ä½“éªŒ&#10;&#10;æœ¬æ¬¡æäº¤æ˜¯å¯¹ Hysteria 2 + Traefik éƒ¨ç½²æ–¹æ¡ˆçš„ä¸€æ¬¡é‡å¤§é‡æž„ï¼Œæ—¨åœ¨å…¨é¢æå‡é¡¹ç›®çš„å¥å£®æ€§ã€æŠ—å°é”èƒ½åŠ›ã€æ€§èƒ½å’Œç”¨æˆ·å‹å¥½åº¦ã€‚æ–¹æ¡ˆä»Žä¸€ä¸ªåŸºç¡€çš„éƒ¨ç½²æ¨¡åž‹å‡çº§ä¸ºä¸€ä¸ªæ™ºèƒ½ã€å…¨è‡ªåŠ¨ä¸”é«˜åº¦å¯å®šåˆ¶çš„â€œäº¤é’¥åŒ™â€è§£å†³æ–¹æ¡ˆã€‚&#10;&#10;ä¸Žåˆå§‹ç‰ˆæœ¬ç›¸æ¯”ï¼Œä¸»è¦æ”¹è¿›å¦‚ä¸‹ï¼š&#10;&#10;### âœ¨ æ–°å¢žåŠŸèƒ½ (Features)&#10;&#10;1.  **å¼•å…¥ç½‘ç«™ä¼ªè£… (Masquerade):**&#10;    -   Hysteria æœåŠ¡çŽ°åœ¨å†…ç½®äº†åå‘ä»£ç†ä¼ªè£…åŠŸèƒ½ã€‚å½“æœåŠ¡å™¨è¢«ç›´æŽ¥é€šè¿‡ HTTPS è®¿é—®æ—¶ï¼Œä¼šæ˜¾ç¤ºä¸ºä¸€ä¸ªçœŸå®žçš„ç½‘ç«™ï¼ˆé»˜è®¤ä¸º Bingï¼‰ï¼Œæžå¤§åœ°å¢žå¼ºäº†æŠ—ä¸»åŠ¨æŽ¢æµ‹å’Œå°é”çš„èƒ½åŠ›ã€‚&#10;    -   é€šè¿‡ `.env` æ–‡ä»¶ä¸­çš„ `MASQUERADE_URL` å˜é‡ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾è‡ªå®šä¹‰ä¼ªè£…ç›®æ ‡ã€‚&#10;&#10;2.  **é»˜è®¤ ACL è§„åˆ™:**&#10;    -   ä¸º Hysteria æœåŠ¡å™¨å¢žåŠ äº†é»˜è®¤çš„ `direct(all)` ACL è§„åˆ™ï¼Œä»Žæ ¹æœ¬ä¸Šè§£å†³äº†å®¢æˆ·ç«¯è¿žæŽ¥åŽå› ç¼ºå°‘å‡ºç«™æƒé™è€Œå‡ºçŽ° `operation not permitted` çš„é—®é¢˜ã€‚&#10;&#10;3.  **å¼•å…¥ `.env` é…ç½®æ–‡ä»¶:**&#10;    -   é‡‡ç”¨æ ‡å‡†çš„ `.env` æ–‡ä»¶æ¥ç®¡ç†æ‰€æœ‰ç”¨æˆ·é…ç½®ï¼Œå–ä»£äº†ä¹‹å‰åœ¨å‘½ä»¤è¡Œä¸­ä¼ é€’é•¿ä¸²çŽ¯å¢ƒå˜é‡çš„æ–¹å¼ï¼Œä½¿é…ç½®æ›´æ¸…æ™°ã€å®‰å…¨ä¸”æ˜“äºŽç®¡ç†ã€‚&#10;&#10;###  æ€§èƒ½ä¸Žä¼˜åŒ– (Performance &amp; Optimizations)&#10;&#10;1.  **è¯ä¹¦ç”³è¯·ä¼˜åŒ–:**&#10;    -   å°† Traefik çš„ ACME è´¨è¯¢æ–¹å¼ä»Ž `HTTP-01` å‡çº§ä¸º `TLS-ALPN-01`ã€‚è¿™ä½¿å¾—è¯ä¹¦ç”³è¯·å’Œç»­ç­¾éƒ½åœ¨ 443 ç«¯å£ä¸Šå®Œæˆï¼Œä¸å†éœ€è¦æš´éœ² 80 ç«¯å£ï¼Œå‡å°‘äº†æ”»å‡»é¢ã€‚&#10;&#10;2.  **æ”¯æŒ AVX æŒ‡ä»¤é›†:**&#10;    -   `Dockerfile` å’Œ `docker-compose.yml` çŽ°åœ¨æ”¯æŒé€šè¿‡ `HYSTERIA_ARCH_SUFFIX` å˜é‡é€‰æ‹©æ€§åœ°æž„å»ºå’Œä½¿ç”¨æ€§èƒ½æ›´å¼ºçš„ AVX ç‰ˆæœ¬ Hysteriaã€‚&#10;&#10;3.  **å†…æ ¸ç½‘ç»œå‚æ•°è°ƒä¼˜ (å·²ä½œä¸ºå¯é€‰):**&#10;    -   åœ¨ `docker-compose.yml` ä¸­å¢žåŠ äº† `sysctls` é…ç½®ä»¥ä¼˜åŒ–å†…æ ¸ç½‘ç»œç¼“å†²åŒºï¼ŒåŽå› å…¼å®¹æ€§é—®é¢˜æ³¨é‡ŠæŽ‰ï¼Œä½†ä¿ç•™äº†ä»£ç ä½œä¸ºç”¨æˆ·çš„å¯é€‰é…ç½®ã€‚&#10;&#10;###  æ”¹è¿›ä¸Žä¿®å¤ (Improvements &amp; Fixes)&#10;&#10;1.  **å¥å£®çš„å¯åŠ¨è„šæœ¬ (`entrypoint.sh`):**&#10;    -   é‡æž„äº†å¯åŠ¨è„šæœ¬ï¼Œå¢žåŠ äº†æ›´æ™ºèƒ½çš„è¯ä¹¦ç­‰å¾…é€»è¾‘ã€‚çŽ°åœ¨å®ƒä¼šå®‰é™åœ°è½®è¯¢ç­‰å¾… Traefik ç”Ÿæˆè¯ä¹¦ï¼Œè€Œä¸æ˜¯åœ¨æ‰¾ä¸åˆ°è¯ä¹¦æ—¶åå¤å¿«é€Ÿé‡å¯ï¼Œæžå¤§åœ°æ”¹å–„äº†é¦–æ¬¡å¯åŠ¨çš„ä½“éªŒå’Œæ—¥å¿—æ¸…æ™°åº¦ã€‚&#10;    -   ä¼˜åŒ–äº†å¸¦å®½é…ç½®éƒ¨åˆ†çš„æ—¥å¿—è¾“å‡ºï¼Œä½¿å…¶æ›´å‡†ç¡®åœ°åæ˜ é…ç½®æ¥æºï¼ˆæ‰‹åŠ¨ã€è‡ªåŠ¨æµ‹é€Ÿæˆ–é»˜è®¤å€¼ï¼‰ã€‚&#10;&#10;2.  **å¼ºåŒ–çš„ Docker æž„å»º (`Dockerfile`):**&#10;    -   é‡æž„äº† `Dockerfile`ï¼Œé‡‡ç”¨å¤šé˜¶æ®µæž„å»ºï¼Œåˆ†ç¦»äº†ä¸‹è½½å’Œæž„å»ºè¿‡ç¨‹ã€‚&#10;    -   å¢žåŠ äº† `wget` ä¸‹è½½é‡è¯•é€»è¾‘ï¼Œè§£å†³äº†åœ¨ä¸ç¨³å®šç½‘ç»œçŽ¯å¢ƒä¸‹æž„å»ºå¤±è´¥çš„é—®é¢˜ã€‚&#10;    -   é€šè¿‡ä½¿ç”¨ `apk` å®‰è£… `speedtest-cli` æˆ–ä¸º `pip` æ·»åŠ  `--break-system-packages` å‚æ•°ï¼Œè§£å†³äº† `PEP 668` å¯¼è‡´çš„æž„å»ºé”™è¯¯ã€‚&#10;&#10;3.  **å…¨é¢çš„æ–‡æ¡£æ›´æ–° (`README.md`):**&#10;    -   é‡å†™äº† README æ–‡ä»¶ï¼Œè¯¦ç»†ä»‹ç»äº†æ‰€æœ‰æ–°åŠŸèƒ½ã€`.env` é…ç½®é¡¹ã€æ›´æ–°æ­¥éª¤å’Œæ›´å…¨é¢çš„æ•…éšœæŽ’é™¤æŒ‡å—ï¼Œæ˜¾è‘—é™ä½Žäº†ç”¨æˆ·çš„ä½¿ç”¨é—¨æ§›ã€‚" />
    <MESSAGE value="fix(traefik): å¯ç”¨TLSé€ä¼ ä»¥ä¿®å¤TCPä¼ªè£…åŠŸèƒ½&#10;&#10;é—®é¢˜æè¿°:&#10;åœ¨ä¹‹å‰çš„é…ç½®ä¸­ï¼Œç›´æŽ¥é€šè¿‡æµè§ˆå™¨è®¿é—®åŸŸåæ—¶ï¼Œä¼ªè£…ç«™ç‚¹æ— æ³•æ˜¾ç¤ºã€‚&#10;Traefik æ—¥å¿—æ˜¾ç¤º &quot;connection refused&quot;ï¼ŒåŽç»­ä¿®å¤äº† Hysteria ç›‘å¬ TCP ä¼ªè£…ç«¯å£åŽï¼Œ&#10;Hysteria æ—¥å¿—åˆæ˜¾ç¤º &quot;TLS handshake error: first record does not look like a TLS handshake&quot;ã€‚&#10;&#10;æ ¹æœ¬åŽŸå› :&#10;Traefik çš„ TCP è·¯ç”±é…ç½®ä¸­ `tls.passthrough` è¢«è®¾ç½®ä¸º `false`ã€‚&#10;è¿™å¯¼è‡´ Traefik ç»ˆæ­¢äº†å®¢æˆ·ç«¯çš„ TLS è¿žæŽ¥ï¼Œç„¶åŽç”¨ä¸€ä¸ªæ™®é€šçš„ã€æœªåŠ å¯†çš„ TCP è¿žæŽ¥åŽ»è®¿é—®åŽç«¯çš„ Hysteria ä¼ªè£…æœåŠ¡å™¨ã€‚&#10;è€Œ Hysteria çš„ `listenHTTPS` æœŸæœ›æŽ¥æ”¶ä¸€ä¸ªå®Œæ•´çš„ã€åŠ å¯†çš„ TLS æ¡æ‰‹è¯·æ±‚ï¼Œå› æ­¤æ— æ³•è¯†åˆ« Traefik å‘æ¥çš„æ™®é€š TCP æµé‡ï¼Œå¯¼è‡´æ¡æ‰‹å¤±è´¥ã€‚&#10;&#10;è§£å†³æ–¹æ¡ˆ:&#10;å°† Traefik TCP è·¯ç”±çš„ `tls.passthrough` è®¾ç½®ä¸º `true`ã€‚&#10;è¿™æ · Traefik å°†ä»…æ ¹æ® SNI è·¯ç”±æµé‡ï¼Œè€ŒæŠŠå®Œæ•´çš„åŠ å¯† TLS è¿žæŽ¥ç›´æŽ¥é€ä¼ ç»™åŽç«¯çš„ Hysteria æœåŠ¡å™¨å¤„ç†ã€‚&#10;ç”±äºŽ Hysteria å·²ç»ä»Žå…±äº«çš„ `acme.json` ä¸­èŽ·å–äº†è¯ä¹¦å¹¶è‡ªè¡Œå¤„ç† TLSï¼Œè¿™æ˜¯æ­£ç¡®çš„å¤„ç†æ–¹å¼ã€‚&#10;&#10;åŒæ—¶ï¼Œç”±äºŽå¼€å¯äº† `passthrough`ï¼ŒTraefik ä¸å†éœ€è¦ `certresolver`ï¼Œå› æ­¤ç›¸å…³æ ‡ç­¾ä¹Ÿè¢«ç§»é™¤ä»¥ä¿æŒé…ç½®æ•´æ´ã€‚&#10;&#10;å˜æ›´è¯¦æƒ…:&#10;- åœ¨ `docker-compose.yml` ä¸­ï¼Œå°† `hysteria-server` æœåŠ¡çš„ Traefik label `traefik.tcp.routers.hysteria-tcp.tls.passthrough` çš„å€¼ä¿®æ”¹ä¸º `true`ã€‚&#10;- ç§»é™¤äº†ä¸å†éœ€è¦çš„ `traefik.tcp.routers.hysteria-tcp.tls.certresolver` æ ‡ç­¾ã€‚" />
    <MESSAGE value="feat: å…¨åŠŸèƒ½é‡æž„Hysteriaéƒ¨ç½²æ–¹æ¡ˆå¹¶å¢žå¼ºç¨³å®šæ€§&#10;&#10;æœ¬æ¬¡æäº¤å¯¹Hysteriaçš„Dockeréƒ¨ç½²æ–¹æ¡ˆè¿›è¡Œäº†ä¸€æ¬¡å…¨é¢çš„é‡æž„å’ŒåŠ å›ºï¼Œè§£å†³äº†åˆå§‹ç‰ˆæœ¬ä¸­çš„å¤šä¸ªæ ¸å¿ƒé—®é¢˜ï¼ŒåŒ…æ‹¬TCPä¼ªè£…å¤±æ•ˆã€å®¹å™¨å¥åº·çŠ¶æ€æœªçŸ¥ä»¥åŠæ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆã€‚&#10;&#10;æœ€ç»ˆå®žçŽ°äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€ç¨³å®šå¯é ä¸”æ˜“äºŽç›‘æŽ§çš„å…¨è‡ªåŠ¨éƒ¨ç½²æ–¹æ¡ˆã€‚&#10;&#10;### 1. ä¿®å¤TCPä¼ªè£…åŠŸèƒ½ (æ ¸å¿ƒå˜æ›´)&#10;&#10;- **åˆå§‹é—®é¢˜**: ç›´æŽ¥é€šè¿‡æµè§ˆå™¨è®¿é—®åŸŸåæ— æ³•æ˜¾ç¤ºä¼ªè£…ç«™ç‚¹ã€‚&#10;- **è°ƒè¯•è¿‡ç¨‹**:&#10;    1.  æœ€åˆå‘çŽ°Traefikæ—¥å¿—æŠ¥`connection refused`ï¼ŒåŽŸå› æ˜¯Hysteriaæ²¡æœ‰ç›‘å¬TCPä¼ªè£…æµé‡ã€‚é€šè¿‡åœ¨`entrypoint.sh`ä¸­ä¸ºHysteriaçš„`masquerade`æ·»åŠ `listenHTTPS`è§£å†³äº†æ­¤é—®é¢˜ã€‚&#10;    2.  éšåŽå‘çŽ°Traefikæ—¥å¿—å˜ä¸º`TLS handshake error: first record does not look like a TLS handshake`ã€‚æ ¹æœ¬åŽŸå› æ˜¯`docker-compose.yml`ä¸­ä¸ºTCPè·¯ç”±é”™è¯¯åœ°é…ç½®äº†`tls.passthrough=true`ï¼Œå¯¼è‡´Traefikå°†åŠ å¯†æµé‡ç›´æŽ¥é€ä¼ ç»™äº†æœŸæœ›æŽ¥æ”¶æ™®é€šHTTPçš„Hysteriaã€‚&#10;- **æœ€ç»ˆæ–¹æ¡ˆ**:&#10;    -   åœ¨`docker-compose.yml`ä¸­ï¼Œå°†TCPè·¯ç”±çš„`tls.passthrough`æ”¹ä¸º`false`ï¼Œå¹¶ä¸ºå…¶é…ç½®`certresolver=le`ï¼Œ**è®©Traefikè´Ÿè´£TLSå¸è½½**ã€‚&#10;    -   åœ¨`entrypoint.sh`ä¸­ï¼Œè®©Hysteriaçš„ä¼ªè£…æœåŠ¡åœ¨`:8088`ç«¯å£ä¸Šç›‘å¬æ™®é€šçš„HTTPæµé‡ï¼Œä¸“é—¨ç”¨äºŽæŽ¥æ”¶Traefikè§£å¯†åŽè½¬å‘è¿‡æ¥çš„è¯·æ±‚ã€‚&#10;- **æˆæžœ**: å®žçŽ°äº†æ­£ç¡®çš„TLSå¸è½½æž¶æž„ï¼Œå……åˆ†åˆ©ç”¨äº†Traefikçš„ä¸ƒå±‚ä»£ç†èƒ½åŠ›ï¼Œå¹¶å…è®¸åœ¨è·¯ç”±ä¸Šåº”ç”¨HTTPä¸­é—´ä»¶ã€‚&#10;&#10;### 2. å¢žå¼ºæœåŠ¡ç¨³å®šæ€§ä¸Žå¥åº·ç›‘æŽ§&#10;&#10;- **åˆå§‹é—®é¢˜**: `docker-compose.yml`ä¸­æœªå®šä¹‰å¥åº·æ£€æŸ¥ï¼Œæ— æ³•åˆ¤æ–­Traefikå’ŒHysteriaå®¹å™¨çš„çœŸå®žè¿è¡ŒçŠ¶æ€ã€‚`traefik`å®¹å™¨æ›¾ä¸€åº¦å¤„äºŽ`unhealthy`çŠ¶æ€ã€‚&#10;- **è°ƒè¯•è¿‡ç¨‹**:&#10;    -   `traefik`ä¸å¥åº·çš„åŽŸå› æ˜¯å…¶`healthcheck`å‘½ä»¤æ— æ³•è®¿é—®é»˜è®¤çš„`:8080/ping`ç®¡ç†ç«¯ç‚¹ã€‚&#10;- **æœ€ç»ˆæ–¹æ¡ˆ**:&#10;    -   åœ¨`docker-compose.yml`çš„Traefikå¯åŠ¨å‘½ä»¤ä¸­ï¼Œæ˜Žç¡®å¯ç”¨`--ping`å’Œ`--api.insecure`ï¼Œå¹¶å®šä¹‰`traefik`ç®¡ç†å…¥å£ç‚¹ï¼ˆ`:8080`ï¼‰ã€‚&#10;    -   æ›´æ–°`traefik`çš„`healthcheck`æŒ‡ä»¤ï¼Œæ˜Žç¡®æŒ‡å‘`traefik`å…¥å£ç‚¹ï¼Œç¡®ä¿æ£€æŸ¥çš„å‡†ç¡®æ€§ã€‚&#10;    -   ä¸º`hysteria-server`æ·»åŠ äº†åŸºäºŽ`netstat`çš„UDPç«¯å£ç›‘å¬æ£€æŸ¥ï¼ŒéªŒè¯å…¶æ ¸å¿ƒæœåŠ¡æ˜¯å¦æ­£å¸¸ã€‚&#10;- **æˆæžœ**: DockerçŽ°åœ¨å¯ä»¥å‡†ç¡®ç›‘æŽ§ä¸¤ä¸ªæ ¸å¿ƒæœåŠ¡çš„å¥åº·çŠ¶å†µï¼Œå¹¶èƒ½åœ¨æœåŠ¡å¤±è´¥æ—¶è‡ªåŠ¨é‡å¯ã€‚&#10;&#10;### 3. ä¼˜åŒ–ä¸Žå…¼å®¹æ€§ä¿®å¤&#10;&#10;- **åˆå§‹é—®é¢˜**:&#10;    -   `sysctls`å†…æ ¸å‚æ•°ä¼˜åŒ–å¯èƒ½å¯¼è‡´åœ¨æŸäº›çŽ¯å¢ƒï¼ˆå¦‚GCPçš„COSï¼‰ä¸‹å®¹å™¨æ— æ³•å¯åŠ¨ã€‚&#10;    -   ï¼ˆå·²å›žé€€ï¼‰å°è¯•ä½¿ç”¨å¤§èŒƒå›´UDPç«¯å£æ˜ å°„ï¼ˆ`40000-50000`ï¼‰è¿›è¡Œç«¯å£è·³è·ƒï¼Œå¯¼è‡´`traefik`å®¹å™¨å¡åœ¨`created`çŠ¶æ€ã€‚&#10;- **æœ€ç»ˆæ–¹æ¡ˆ**:&#10;    -   å°†`sysctls`éƒ¨åˆ†ä¿ç•™ä½†é»˜è®¤æ³¨é‡ŠæŽ‰ï¼Œå¹¶æ·»åŠ äº†è¯´æ˜Žï¼Œå¢žå¼ºäº†æ–¹æ¡ˆçš„æ™®é€‚æ€§ã€‚&#10;    -   æš‚æ—¶ç§»é™¤äº†å¤æ‚çš„ç«¯å£è·³è·ƒæ–¹æ¡ˆï¼Œå›žå½’åˆ°å•ä¸€UDPç«¯å£ï¼ˆ`:443`ï¼‰ï¼Œç¡®ä¿åœ¨æ‰€æœ‰çŽ¯å¢ƒä¸‹çš„ç¨³å®šå¯åŠ¨ã€‚æœªæ¥çš„ä¼˜åŒ–å¯ä»¥éµå¾ªHysteriaå®˜æ–¹æ–‡æ¡£ï¼Œä½¿ç”¨å®¿ä¸»æœº`iptables`å®žçŽ°ã€‚&#10;&#10;ç»è¿‡ä»¥ä¸Šç³»åˆ—é‡æž„ï¼Œå½“å‰éƒ¨ç½²æ–¹æ¡ˆåœ¨åŠŸèƒ½ã€ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ä¸Šéƒ½è¾¾åˆ°äº†ä¸€ä¸ªå…¨æ–°çš„é«˜åº¦ã€‚" />
    <MESSAGE value="fix(entrypoint): ä¿®å¤å¸¦å®½é…ç½®é€»è¾‘ï¼Œç¡®ä¿AUTO_SPEEDTESTä¼˜å…ˆ&#10;&#10;é—®é¢˜æè¿°:&#10;åœ¨ä¹‹å‰çš„è„šæœ¬é€»è¾‘ä¸­ï¼Œå³ä½¿ `.env` æ–‡ä»¶ä¸­è®¾ç½®äº† `AUTO_SPEEDTEST=true`ï¼Œ&#10;å¦‚æžœ `UP_MBPS` å’Œ `DOWN_MBPS` å˜é‡å­˜åœ¨ä¸”éžç©ºï¼ˆå³ä½¿æ˜¯é»˜è®¤å€¼ &quot;100&quot;ï¼‰ï¼Œ&#10;è„šæœ¬ä¹Ÿä¼šé”™è¯¯åœ°è¿›å…¥â€œæ‰‹åŠ¨è®¾ç½®å¸¦å®½â€çš„åˆ†æ”¯ï¼Œå¯¼è‡´è‡ªåŠ¨æµ‹é€Ÿé€»è¾‘è¢«å®Œå…¨è·³è¿‡ã€‚&#10;è¿™ä¸Žæ–‡æ¡£å’Œé¢„æœŸçš„è¡Œä¸ºä¸ç¬¦â€”â€”å³æ‰‹åŠ¨è®¾ç½®çš„å¸¦å®½åªåº”åœ¨ `AUTO_SPEEDTEST=false` æ—¶ç”Ÿæ•ˆã€‚&#10;&#10;æ ¹æœ¬åŽŸå› :&#10;`entrypoint.sh` ä¸­çš„æ¡ä»¶åˆ¤æ–­é¡ºåºæœ‰è¯¯ã€‚å®ƒé¦–å…ˆæ£€æŸ¥äº† `UP_MBPS_USER` å’Œ `DOWN_MBPS_USER`&#10;æ˜¯å¦ä¸ºç©ºï¼Œè€Œä¸æ˜¯é¦–å…ˆæ£€æŸ¥ `AUTO_SPEEDTEST` çš„çŠ¶æ€ã€‚ç”±äºŽè¿™äº›å˜é‡æ€»æ˜¯ä»Ž&#10;`.env` æ–‡ä»¶ä¸­èŽ·å¾—éžç©ºå€¼ï¼Œå› æ­¤è‡ªåŠ¨æµ‹é€Ÿçš„ `elif` åˆ†æ”¯æ°¸è¿œæ— æ³•è¢«è§¦åŠã€‚&#10;&#10;è§£å†³æ–¹æ¡ˆ:&#10;é‡æž„äº† `entrypoint.sh` ä¸­å¸¦å®½é…ç½®éƒ¨åˆ†çš„ `if-elif-else` é€»è¾‘ã€‚&#10;çŽ°åœ¨çš„åˆ¤æ–­é¡ºåºå¦‚ä¸‹ï¼š&#10;1.  é¦–å…ˆæ£€æŸ¥ `AUTO_SPEEDTEST` æ˜¯å¦ä¸º `true`ã€‚å¦‚æžœæ˜¯ï¼Œåˆ™å¼ºåˆ¶æ‰§è¡Œè‡ªåŠ¨æµ‹é€Ÿã€‚&#10;2.  å¦‚æžœ `AUTO_SPEEDTEST` ä¸ä¸º `true`ï¼Œå†æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ‰‹åŠ¨è®¾ç½®äº†å¸¦å®½ã€‚&#10;3.  å¦‚æžœä»¥ä¸Šæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„åŽå¤‡å¸¦å®½å€¼ã€‚&#10;&#10;è¿™ä¸ªä¿®æ”¹ç¡®ä¿äº† `AUTO_SPEEDTEST` å˜é‡æ‹¥æœ‰æœ€é«˜çš„å†³ç­–ä¼˜å…ˆçº§ï¼Œä½¿è„šæœ¬çš„è¡Œä¸º&#10;ä¸Žç”¨æˆ·çš„æœŸæœ›å’Œæ–‡æ¡£æè¿°å®Œå…¨ä¸€è‡´ã€‚&#10;&#10;å˜æ›´è¯¦æƒ…:&#10;- `entrypoint.sh`: è°ƒæ•´äº†å¸¦å®½é…ç½®çš„æ¡ä»¶åˆ¤æ–­é¡ºåºã€‚" />
    <option name="LAST_COMMIT_MESSAGE" value="fix(entrypoint): ä¿®å¤å¸¦å®½é…ç½®é€»è¾‘ï¼Œç¡®ä¿AUTO_SPEEDTESTä¼˜å…ˆ&#10;&#10;é—®é¢˜æè¿°:&#10;åœ¨ä¹‹å‰çš„è„šæœ¬é€»è¾‘ä¸­ï¼Œå³ä½¿ `.env` æ–‡ä»¶ä¸­è®¾ç½®äº† `AUTO_SPEEDTEST=true`ï¼Œ&#10;å¦‚æžœ `UP_MBPS` å’Œ `DOWN_MBPS` å˜é‡å­˜åœ¨ä¸”éžç©ºï¼ˆå³ä½¿æ˜¯é»˜è®¤å€¼ &quot;100&quot;ï¼‰ï¼Œ&#10;è„šæœ¬ä¹Ÿä¼šé”™è¯¯åœ°è¿›å…¥â€œæ‰‹åŠ¨è®¾ç½®å¸¦å®½â€çš„åˆ†æ”¯ï¼Œå¯¼è‡´è‡ªåŠ¨æµ‹é€Ÿé€»è¾‘è¢«å®Œå…¨è·³è¿‡ã€‚&#10;è¿™ä¸Žæ–‡æ¡£å’Œé¢„æœŸçš„è¡Œä¸ºä¸ç¬¦â€”â€”å³æ‰‹åŠ¨è®¾ç½®çš„å¸¦å®½åªåº”åœ¨ `AUTO_SPEEDTEST=false` æ—¶ç”Ÿæ•ˆã€‚&#10;&#10;æ ¹æœ¬åŽŸå› :&#10;`entrypoint.sh` ä¸­çš„æ¡ä»¶åˆ¤æ–­é¡ºåºæœ‰è¯¯ã€‚å®ƒé¦–å…ˆæ£€æŸ¥äº† `UP_MBPS_USER` å’Œ `DOWN_MBPS_USER`&#10;æ˜¯å¦ä¸ºç©ºï¼Œè€Œä¸æ˜¯é¦–å…ˆæ£€æŸ¥ `AUTO_SPEEDTEST` çš„çŠ¶æ€ã€‚ç”±äºŽè¿™äº›å˜é‡æ€»æ˜¯ä»Ž&#10;`.env` æ–‡ä»¶ä¸­èŽ·å¾—éžç©ºå€¼ï¼Œå› æ­¤è‡ªåŠ¨æµ‹é€Ÿçš„ `elif` åˆ†æ”¯æ°¸è¿œæ— æ³•è¢«è§¦åŠã€‚&#10;&#10;è§£å†³æ–¹æ¡ˆ:&#10;é‡æž„äº† `entrypoint.sh` ä¸­å¸¦å®½é…ç½®éƒ¨åˆ†çš„ `if-elif-else` é€»è¾‘ã€‚&#10;çŽ°åœ¨çš„åˆ¤æ–­é¡ºåºå¦‚ä¸‹ï¼š&#10;1.  é¦–å…ˆæ£€æŸ¥ `AUTO_SPEEDTEST` æ˜¯å¦ä¸º `true`ã€‚å¦‚æžœæ˜¯ï¼Œåˆ™å¼ºåˆ¶æ‰§è¡Œè‡ªåŠ¨æµ‹é€Ÿã€‚&#10;2.  å¦‚æžœ `AUTO_SPEEDTEST` ä¸ä¸º `true`ï¼Œå†æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ‰‹åŠ¨è®¾ç½®äº†å¸¦å®½ã€‚&#10;3.  å¦‚æžœä»¥ä¸Šæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„åŽå¤‡å¸¦å®½å€¼ã€‚&#10;&#10;è¿™ä¸ªä¿®æ”¹ç¡®ä¿äº† `AUTO_SPEEDTEST` å˜é‡æ‹¥æœ‰æœ€é«˜çš„å†³ç­–ä¼˜å…ˆçº§ï¼Œä½¿è„šæœ¬çš„è¡Œä¸º&#10;ä¸Žç”¨æˆ·çš„æœŸæœ›å’Œæ–‡æ¡£æè¿°å®Œå…¨ä¸€è‡´ã€‚&#10;&#10;å˜æ›´è¯¦æƒ…:&#10;- `entrypoint.sh`: è°ƒæ•´äº†å¸¦å®½é…ç½®çš„æ¡ä»¶åˆ¤æ–­é¡ºåºã€‚" />
  </component>
  <component name="VgoProject">
    <settings-migrated>true</settings-migrated>
  </component>
</project>